---
tag: HashMap;hard;
title: 串联所有单词的子串
---
借助两个hashtable进行比对
时间复杂度: $O(n * m)$, n为字符串s的长度，m为words数组内所有字符长度之和。
空间复杂度: $O(k)$, k为words数组长度

```js
/**
 * @param {string} s
 * @param {string[]} words
 * @return {number[]}
 */
var findSubstring = function (s, words) {
  let t1 = {};
  let res = [];
  // 将所有的word存到一个hashtable
  for (let word of words) {
    if (!t1[word]) {
      t1[word] = 0;
    }
    t1[word]++;
  }
  const step = words.length * words[0].length;
  for (let i = 0; i <= s.length - step; i++) {
    if (judge(i, i + step)) {
      res.push(i);
    }
  }
  return res;

  function judge(start, end) {
    const t2 = {};
    for (let i = start; i <= end - words[0].length; i += words[0].length) {
      const sub = s.substring(i, i + words[0].length);
      t2[sub] = t2[sub] ? t2[sub] + 1 : 1;
      if (!t1[sub] || t2[sub] > t1[sub]) {
        return false;
      }
    }
    // console.log({ t1, t2 });
    return true;
  }
};
```